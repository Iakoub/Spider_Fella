[include fluidd.cfg]

#####################################################################
#   mcu and Storage
#####################################################################

[mcu]
serial: /dev/serial/by-id/usb-Klipper_rp2040_454741505B05BB6A-if00
restart_method: command

[virtual_sdcard]
path: /home/pi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

#####################################################################
#   Printer Basics
#####################################################################

[printer]
kinematics: delta
max_velocity: 500
max_accel: 5000
max_z_velocity: 40
max_z_accel: 400
delta_radius: 59

[delta_calibrate]
radius: 59
horizontal_move_z: 10

[gcode_arcs]
resolution: 0.1

[idle_timeout]
timeout: 1800
gcode:
   M84
   SET_LED LED=tool_0 GREEN=0 RED=0 BLUE=0 WHITE=0

[exclude_object]

[endstop_phase]

[bed_mesh]
algorithm: bicubic
speed: 40
horizontal_move_z: 3
mesh_radius: 25
mesh_origin: 0, 0
round_probe_count: 5

#####################################################################
#   abc Stepper Settings
#####################################################################

[stepper_a] #front_left
step_pin: gpio11
dir_pin: gpio10
enable_pin: !gpio12
microsteps: 32
rotation_distance: 40
endstop_pin: ^gpio4
#position_endstop: 150
homing_speed: 40
#arm_length: 127

[tmc2209 stepper_a]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 0
interpolate: True
run_current: 0.85
sense_resistor: 0.110
#stealthchop_threshold: 999999 

[stepper_b] #front_right
step_pin: gpio6
dir_pin: gpio5
enable_pin: !gpio7
microsteps: 32
rotation_distance: 40
endstop_pin: ^gpio3

[tmc2209 stepper_b]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 2
interpolate: True
run_current: 0.85
sense_resistor: 0.110
#stealthchop_threshold: 999999

[stepper_c] #rear (cablechain)
step_pin: gpio19
dir_pin: gpio28
enable_pin: !gpio2
microsteps: 32
rotation_distance: 40
endstop_pin: ^gpio25

[tmc2209 stepper_c]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 1
interpolate: True
run_current: 0.85
sense_resistor: 0.110
#stealthchop_threshold: 999999

[autotune_tmc stepper_a]
motor: ldo-42sth40-1684ac
tuning_goal: silent
[autotune_tmc stepper_b]
motor: ldo-42sth40-1684ac
tuning_goal: silent
[autotune_tmc stepper_c]
motor: ldo-42sth40-1684ac
tuning_goal: silent

#####################################################################
#   Extruder & Hotend & Bed Heater
#####################################################################
[heater_bed]
heater_pin: gpio21
sensor_type:Generic 3950
sensor_pin: gpio26
max_power: 1.0
min_temp: 0
max_temp: 80
control = pid
pid_kp = 58.704
pid_ki = 1.937
pid_kd = 444.685

[include hardware/*.cfg]
[include macros/*.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [printer]
#*# delta_radius = 58.718167
#*#
#*# [stepper_a]
#*# angle = 210.930166
#*# arm_length = 127.000000
#*# position_endstop = 147.254861
#*#
#*# [stepper_b]
#*# angle = 328.825929
#*# arm_length = 127.000000
#*# position_endstop = 147.441502
#*#
#*# [stepper_c]
#*# angle = 90.000000
#*# arm_length = 127.000000
#*# position_endstop = 147.120685
#*#
#*# [delta_calibrate]
#*# height0 = 0.0
#*# height0_pos = 23562.000,23562.000,23562.000
#*# height1 = 0.0
#*# height1_pos = 27765.000,27765.000,21306.000
#*# height2 = 0.0
#*# height2_pos = 23171.000,30129.000,23171.000
#*# height3 = 0.0
#*# height3_pos = 21396.000,27055.000,27055.000
#*# height4 = 0.0
#*# height4_pos = 22961.000,22961.000,27964.000
#*# height5 = 0.0
#*# height5_pos = 26445.000,21535.000,26445.000
#*# height6 = 0.0
#*# height6_pos = 29015.000,23092.000,23092.000
#*#
#*# [endstop_phase stepper_a]
#*# trigger_phase = 2/128
#*#
#*# [endstop_phase stepper_b]
#*# trigger_phase = 43/128
#*#
#*# [endstop_phase stepper_c]
#*# trigger_phase = 107/128
